{"ast":null,"code":"var _jsxFileName = \"/home/becky/Documents/Official Files/Blog/blogCli/src/components/CreatePost/CreatePost.js\";\nimport React from 'react';\nimport '../../assets/Styles/Styles.css';\nimport FormValidator from '../Validator/FormValidator';\nimport axios from 'axios';\nimport toastr from 'toastr';\nimport env from \"../../env\";\nimport { MDBRow, MDBCol, MDBCard, MDBCardBody, MDBBtn, MDBContainer } from \"mdbreact\";\nexport default class CreateBlog extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFormSubmit = async event => {\n      event.preventDefault();\n      const validation = this.validator.validate(this.state);\n      this.setState({\n        validation\n      });\n      this.submitted = true;\n\n      if (validation.isValid) {\n        try {\n          const token = localStorage.getItem('token');\n          const headers = {\n            'auth-token': token\n          };\n          const _this$state = this.state,\n                title = _this$state.title,\n                body = _this$state.body,\n                image_url = _this$state.image_url;\n          const postData = {\n            title,\n            body,\n            image_url\n          };\n          console.log(postData);\n          const res = await axios.post(\"\".concat(env.api, \"/posts\"), postData, {\n            headers: headers\n          });\n          toastr.options.positionClass = \"toast-top-center\";\n\n          if (res) {\n            setTimeout(() => toastr.success('New Post Successfully Created'), 2000);\n          }\n\n          this.props.history.push('/create-post');\n        } catch (err) {\n          toastr.error('An Error Occured, try again');\n        }\n      } else {\n        toastr.options.positionClass = \"toast-top-center\";\n        toastr.warning('Cannot Create Post Make sure all fields are correctly filled');\n      }\n    };\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handlePostSubmit = this.handleFormSubmit.bind(this);\n    this.validator = new FormValidator([{\n      field: 'title',\n      method: 'isEmpty',\n      validWhen: false,\n      message: 'Title is required'\n    }, {\n      field: 'body',\n      method: 'isEmpty',\n      validWhen: false,\n      message: 'Body is required'\n    }]);\n    this.state = {\n      title: '',\n      body: '',\n      author: '',\n      image_url: '',\n      likes: '',\n      validation: this.validator.valid(),\n      successmessage: '',\n      errormessage: ''\n    };\n  }\n\n  handleInputChange(event) {\n    event.preventDefault();\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  uploadWidget(event) {\n    const $this = this;\n    event.preventDefault();\n    window.cloudinary.openUploadWidget({\n      cloud_name: 'dxxm4ehaw',\n      upload_preset: 'ruvxhuuh',\n      tags: ['xmas']\n    }, (error, result) => {\n      console.log(result[0]);\n      $this.setState({\n        image_url: result[0].url\n      });\n    });\n  }\n\n  render() {\n    let validation = this.submitted ? // if the form has been submitted at least once\n    this.validator.validate(this.state) : // then check validity every time we render\n    this.state.validation;\n    return React.createElement(MDBContainer, {\n      className: \"backgroundCP\",\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(MDBContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })) // <div className='container createpostcontainer'>\n    //     <h2 className=\"err-success text-center\">{this.state.errormessage}</h2>\n    //     <h2 className=\"err-success text-center\">{this.state.successmessage}</h2>\n    //     <div className='row createpostbody'>\n    //         <form>\n    //             <div className=' form-group uploadimg' >\n    //                 <button onClick={this.uploadWidget.bind(this)} className=\"upload-button btn btn-dark\">\n    //                    Click here to add image\n    //         </button>\n    //             </div>\n    //             <div className='form-group title'>\n    //                 <input className='titletext' name='title'\n    //                     placeholder='Enter your Title' value={this.state.title}\n    //                     onChange={this.handleInputChange} />\n    //                 <span className=\"help-block\">{validation.title.message}</span>\n    //             </div>\n    //             <div className='form-group body'>\n    //                 <textarea className='bodytext' name='body'\n    //                     onChange={this.handleInputChange} value={this.state.body} placeholder='Create your Story' >\n    //                 </textarea>\n    //                 <span className=\"help-block\">{validation.body.message}</span>\n    //             </div>\n    //             <div className='form-group uploadbtn'>\n    //                 <button type=\"submit\" onClick={this.handleFormSubmit}\n    //                     className=\"btn btn-success\">Create</button>\n    //                     <a class=\"btn btn-danger cancelbtn\" href=\"/\" role=\"button\">Cancel</a>\n    //             </div>\n    //         </form>\n    //     </div>\n    // </div>\n    ;\n  }\n\n}","map":{"version":3,"sources":["/home/becky/Documents/Official Files/Blog/blogCli/src/components/CreatePost/CreatePost.js"],"names":["React","FormValidator","axios","toastr","env","MDBRow","MDBCol","MDBCard","MDBCardBody","MDBBtn","MDBContainer","CreateBlog","Component","constructor","props","handleFormSubmit","event","preventDefault","validation","validator","validate","state","setState","submitted","isValid","token","localStorage","getItem","headers","title","body","image_url","postData","console","log","res","post","api","options","positionClass","setTimeout","success","history","push","err","error","warning","handleInputChange","bind","handlePostSubmit","field","method","validWhen","message","author","likes","valid","successmessage","errormessage","target","name","value","uploadWidget","$this","window","cloudinary","openUploadWidget","cloud_name","upload_preset","tags","result","url","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,gCAAP;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,OAAzB,EAAkCC,WAAlC,EAA+CC,MAA/C,EAAuDC,YAAvD,QAA2E,UAA3E;AAGA,eAAe,MAAMC,UAAN,SAAyBX,KAAK,CAACY,SAA/B,CAAyC;AACpDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA4CnBC,gBA5CmB,GA4CA,MAAOC,KAAP,IAAiB;AAChCA,MAAAA,KAAK,CAACC,cAAN;AACA,YAAMC,UAAU,GAAG,KAAKC,SAAL,CAAeC,QAAf,CAAwB,KAAKC,KAA7B,CAAnB;AACA,WAAKC,QAAL,CAAc;AAAEJ,QAAAA;AAAF,OAAd;AACA,WAAKK,SAAL,GAAiB,IAAjB;;AAEA,UAAIL,UAAU,CAACM,OAAf,EAAwB;AACpB,YAAI;AACA,gBAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,gBAAMC,OAAO,GAAG;AACZ,0BAAcH;AADF,WAAhB;AAFA,8BAKmC,KAAKJ,KALxC;AAAA,gBAKQQ,KALR,eAKQA,KALR;AAAA,gBAKeC,IALf,eAKeA,IALf;AAAA,gBAKqBC,SALrB,eAKqBA,SALrB;AAMA,gBAAMC,QAAQ,GAAG;AACbH,YAAAA,KADa;AAEbC,YAAAA,IAFa;AAGbC,YAAAA;AAHa,WAAjB;AAKAE,UAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACA,gBAAMG,GAAG,GAAG,MAAMjC,KAAK,CAACkC,IAAN,WAAchC,GAAG,CAACiC,GAAlB,aAA+BL,QAA/B,EAAyC;AAAEJ,YAAAA,OAAO,EAAEA;AAAX,WAAzC,CAAlB;AACAzB,UAAAA,MAAM,CAACmC,OAAP,CAAeC,aAAf,GAA+B,kBAA/B;;AAEA,cAAIJ,GAAJ,EAAS;AACLK,YAAAA,UAAU,CAAC,MAEPrC,MAAM,CAACsC,OAAP,CAAe,+BAAf,CAFM,EAE2C,IAF3C,CAAV;AAGH;;AACD,eAAK3B,KAAL,CAAW4B,OAAX,CAAmBC,IAAnB,CAAwB,cAAxB;AAEH,SAtBD,CAsBE,OAAOC,GAAP,EAAY;AACVzC,UAAAA,MAAM,CAAC0C,KAAP,CAAa,6BAAb;AAEH;AAEJ,OA5BD,MA4BO;AACH1C,QAAAA,MAAM,CAACmC,OAAP,CAAeC,aAAf,GAA+B,kBAA/B;AAEApC,QAAAA,MAAM,CAAC2C,OAAP,CAAe,8DAAf;AAEH;AACJ,KApFkB;;AAGf,SAAKC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKC,gBAAL,GAAwB,KAAKlC,gBAAL,CAAsBiC,IAAtB,CAA2B,IAA3B,CAAxB;AAGA,SAAK7B,SAAL,GAAiB,IAAIlB,aAAJ,CAAkB,CAE/B;AACIiD,MAAAA,KAAK,EAAE,OADX;AAEIC,MAAAA,MAAM,EAAE,SAFZ;AAGIC,MAAAA,SAAS,EAAE,KAHf;AAIIC,MAAAA,OAAO,EAAE;AAJb,KAF+B,EAS/B;AACIH,MAAAA,KAAK,EAAE,MADX;AAEIC,MAAAA,MAAM,EAAE,SAFZ;AAGIC,MAAAA,SAAS,EAAE,KAHf;AAIIC,MAAAA,OAAO,EAAE;AAJb,KAT+B,CAAlB,CAAjB;AAkBA,SAAKhC,KAAL,GAAa;AACTQ,MAAAA,KAAK,EAAE,EADE;AAETC,MAAAA,IAAI,EAAE,EAFG;AAGTwB,MAAAA,MAAM,EAAE,EAHC;AAITvB,MAAAA,SAAS,EAAE,EAJF;AAKTwB,MAAAA,KAAK,EAAE,EALE;AAMTrC,MAAAA,UAAU,EAAE,KAAKC,SAAL,CAAeqC,KAAf,EANH;AAOTC,MAAAA,cAAc,EAAE,EAPP;AAQTC,MAAAA,YAAY,EAAE;AARL,KAAb;AAUH;;AAEDX,EAAAA,iBAAiB,CAAC/B,KAAD,EAAQ;AACrBA,IAAAA,KAAK,CAACC,cAAN;AACA,SAAKK,QAAL,CAAc;AAAE,OAACN,KAAK,CAAC2C,MAAN,CAAaC,IAAd,GAAqB5C,KAAK,CAAC2C,MAAN,CAAaE;AAApC,KAAd;AAEH;;AA6CDC,EAAAA,YAAY,CAAC9C,KAAD,EAAQ;AAChB,UAAM+C,KAAK,GAAG,IAAd;AACA/C,IAAAA,KAAK,CAACC,cAAN;AACA+C,IAAAA,MAAM,CAACC,UAAP,CAAkBC,gBAAlB,CAAmC;AAAEC,MAAAA,UAAU,EAAE,WAAd;AAA2BC,MAAAA,aAAa,EAAE,UAA1C;AAAsDC,MAAAA,IAAI,EAAE,CAAC,MAAD;AAA5D,KAAnC,EACI,CAACxB,KAAD,EAAQyB,MAAR,KAAmB;AACfrC,MAAAA,OAAO,CAACC,GAAR,CAAYoC,MAAM,CAAC,CAAD,CAAlB;AACAP,MAAAA,KAAK,CAACzC,QAAN,CAAe;AAAES,QAAAA,SAAS,EAAEuC,MAAM,CAAC,CAAD,CAAN,CAAUC;AAAvB,OAAf;AACH,KAJL;AAKH;;AACDC,EAAAA,MAAM,GAAG;AAEL,QAAItD,UAAU,GAAG,KAAKK,SAAL,GAA2B;AACxC,SAAKJ,SAAL,CAAeC,QAAf,CAAwB,KAAKC,KAA7B,CADa,GAC2B;AACxC,SAAKA,KAAL,CAAWH,UAFf;AAGA,WACI,oBAAC,YAAD;AAAc,MAAA,SAAS,EAAC,cAAxB;AAAuC,MAAA,KAAK,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,CAQI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAhDJ;AAkDH;;AAvJmD","sourcesContent":["import React from 'react';\nimport '../../assets/Styles/Styles.css';\nimport FormValidator from '../Validator/FormValidator';\nimport axios from 'axios';\nimport toastr from 'toastr';\nimport env from \"../../env\";\nimport { MDBRow, MDBCol, MDBCard, MDBCardBody, MDBBtn, MDBContainer } from \"mdbreact\";\n\n\nexport default class CreateBlog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handlePostSubmit = this.handleFormSubmit.bind(this);\n\n\n        this.validator = new FormValidator([\n\n            {\n                field: 'title',\n                method: 'isEmpty',\n                validWhen: false,\n                message: 'Title is required'\n            },\n\n            {\n                field: 'body',\n                method: 'isEmpty',\n                validWhen: false,\n                message: 'Body is required'\n            },\n\n        ]);\n\n        this.state = {\n            title: '',\n            body: '',\n            author: '',\n            image_url: '',\n            likes: '',\n            validation: this.validator.valid(),\n            successmessage: '',\n            errormessage: '',\n        }\n    }\n\n    handleInputChange(event) {\n        event.preventDefault();\n        this.setState({ [event.target.name]: event.target.value })\n\n    }\n\n\n    handleFormSubmit = async (event) => {\n        event.preventDefault();\n        const validation = this.validator.validate(this.state);\n        this.setState({ validation });\n        this.submitted = true;\n\n        if (validation.isValid) {\n            try {\n                const token = localStorage.getItem('token');\n                const headers = {\n                    'auth-token': token\n                };\n                const { title, body, image_url } = this.state;\n                const postData = {\n                    title,\n                    body,\n                    image_url\n                };\n                console.log(postData)\n                const res = await axios.post(`${env.api}/posts`, postData, { headers: headers });\n                toastr.options.positionClass = \"toast-top-center\";\n\n                if (res) {\n                    setTimeout(() =>\n\n                        toastr.success('New Post Successfully Created'), 2000)\n                }\n                this.props.history.push('/create-post');\n\n            } catch (err) {\n                toastr.error('An Error Occured, try again')\n\n            }\n\n        } else {\n            toastr.options.positionClass = \"toast-top-center\"\n\n            toastr.warning('Cannot Create Post Make sure all fields are correctly filled')\n\n        }\n    }\n\n    uploadWidget(event) {\n        const $this = this;\n        event.preventDefault();\n        window.cloudinary.openUploadWidget({ cloud_name: 'dxxm4ehaw', upload_preset: 'ruvxhuuh', tags: ['xmas'] },\n            (error, result) => {\n                console.log(result[0]);\n                $this.setState({ image_url: result[0].url });\n            });\n    }\n    render() {\n\n        let validation = this.submitted ?           // if the form has been submitted at least once\n            this.validator.validate(this.state) :   // then check validity every time we render\n            this.state.validation\n        return (\n            <MDBContainer className=\"backgroundCP\" fluid>\n\n                <MDBContainer>\n                    \n                </MDBContainer>\n\n            </MDBContainer>\n            // <div className='container createpostcontainer'>\n            //     <h2 className=\"err-success text-center\">{this.state.errormessage}</h2>\n            //     <h2 className=\"err-success text-center\">{this.state.successmessage}</h2>\n            //     <div className='row createpostbody'>\n            //         <form>\n            //             <div className=' form-group uploadimg' >\n            //                 <button onClick={this.uploadWidget.bind(this)} className=\"upload-button btn btn-dark\">\n            //                    Click here to add image\n            //         </button>\n\n            //             </div>\n\n            //             <div className='form-group title'>\n            //                 <input className='titletext' name='title'\n            //                     placeholder='Enter your Title' value={this.state.title}\n            //                     onChange={this.handleInputChange} />\n\n            //                 <span className=\"help-block\">{validation.title.message}</span>\n\n            //             </div>\n\n            //             <div className='form-group body'>\n            //                 <textarea className='bodytext' name='body'\n            //                     onChange={this.handleInputChange} value={this.state.body} placeholder='Create your Story' >\n\n            //                 </textarea>\n            //                 <span className=\"help-block\">{validation.body.message}</span>\n\n            //             </div>\n\n            //             <div className='form-group uploadbtn'>\n            //                 <button type=\"submit\" onClick={this.handleFormSubmit}\n            //                     className=\"btn btn-success\">Create</button>\n\n            //                     <a class=\"btn btn-danger cancelbtn\" href=\"/\" role=\"button\">Cancel</a>\n            //             </div>\n            //         </form>\n\n            //     </div>\n\n            // </div>\n        )\n    }\n}\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}